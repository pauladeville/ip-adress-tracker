let map;const tileLayer=L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19});let ipAddress="",domainName="";const submitButton=document.querySelector("#submit"),inputArea=document.querySelector("input");async function getCoordinates(e){/^([0-9]{1,3}\.){3}[0-9]{1,3}$/.test(e)?(ipAddress=e,inputArea.classList.remove("error")):/^[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}$/.test(e)?(inputArea.classList.remove("error"),domainName=e):inputArea.classList.add("error");try{const e=await fetch("https://geo.ipify.org/api/v2/country,city?apiKey=at_dfH8tDzTsnI6Fb3ulm1ilJVI7g7qd&ipAddress="+ipAddress+"&domain="+domainName),t=await e.json();updateResult(t);const{lat:o,lng:n}=t.location;updateMap(o,n)}catch(e){console.log(e)}}async function updateMap(e,t){try{map&&map.remove();document.querySelector("#spinner").style.display="none",map=L.map("map").setView([e,t],14),tileLayer.addTo(map),L.marker([e,t]).addTo(map)}catch(e){console.log(e)}}fetch("http://localhost:8080/https://api.ipify.org/?format=json").then((e=>e.json())).then((e=>{getCoordinates(e.ip)})).catch((e=>{console.error(e)}));const addressResult=document.querySelector(".result__item--address p"),locationResult=document.querySelector(".result__item--location p"),timezoneResult=document.querySelector(".result__item--timezone p"),ispResult=document.querySelector(".result__item--isp p");async function updateResult(e){addressResult.textContent=e.ip,locationResult.textContent=e.location.city,timezoneResult.textContent="UTC "+e.location.timezone,ispResult.textContent=e.isp}submitButton.addEventListener("click",(()=>{getCoordinates(inputArea.value)})),document.addEventListener("keypress",(e=>{"Enter"===e.key&&getCoordinates(inputArea.value)}));
//# sourceMappingURL=index.aa577e23.js.map
